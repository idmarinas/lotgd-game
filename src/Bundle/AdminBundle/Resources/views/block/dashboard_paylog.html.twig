{#
    This file is part of "LoTGD Core Package".

    @see https://github.com/idmarinas/lotgd-game

    @license https://github.com/idmarinas/lotgd-game/blob/master/LICENSE.md
    @author IDMarinas

    @since 6.0.0

    @file
    Template block for show total donations of current month.

    Available variables:
    - settings:
        - translation_domain: Domain for translate text.
        - color: Color for box.
        - icon: Icon for box.
    - amount: Total donations for current month.
#}

{% extends sonata_block.templates.block_base %}

{% set translation_domain = settings.translation_domain ?? admin.translationDomain %}

{% block block %}
    <!-- small box -->
    <div class="small-box {{ settings.color }}">
        <div class="inner">
            {# NEXT_MAJOR: remove the attribute check and just use .countResults() #}
            <h3>{{ donation.amount|format_number({fraction_digit: 2}) }}</h3>
            <p>{{ 'dashboard.block.paylog.current_month'|trans({
                'symbol': lotgd_paypal_site_currency|currency_symbol,
                'month': donation.month
            }, translation_domain) }}</p>
        </div>
        <div class="icon">
            <i class="fa {{ settings.icon }}"></i>
        </div>
        <a href="{{ admin.generateUrl('list', {filter: settings.filters}) }}" class="small-box-footer">
            {{ 'stats_view_more'|trans({}, 'SonataAdminBundle') }} <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
        </a>
    </div>
{% endblock %}
